<div class="products-page">

  <!--  Filter sekcija -->
  <section class="filter-section">
    <form [formGroup]="filterForm" (ngSubmit)="onSubmit()">
      <input type="text" formControlName="searchQuery" placeholder="Search products..." />

      <select formControlName="categoryId">
        <option [value]="null">All categories</option>
        <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
      </select>

      <div class="price-range">
        <label>From:</label>
        <input type="number" formControlName="minPrice" />
        <label>To:</label>
        <input type="number" formControlName="maxPrice" />
      </div>

      <select formControlName="sortBy">
        <option value="createdDateDesc">Latest</option>
        <option value="priceAsc">Price - ascending</option>
        <option value="priceDesc">Price - Descending</option>
      </select>

      <button type="submit">Apply filter</button>
    </form>
  </section>

  <hr />

  <!-- ðŸ§© Lista proizvoda -->
  <section class="product-list">
    <h2>Products</h2>

    <div class="product-grid">
      <div *ngFor="let product of products" class="product-card">
        <button *ngIf="authService.isLoggedIn()"
          class="favorite-btn"
          (click)="toggleFavorite(product)">

          <i
            class="fa-heart"
            [class.fa-solid]="product.isFavorite"
            [class.fa-regular]="!product.isFavorite">
          </i>

        </button>

        <!-- Slika proizvoda -->
        <div class="product-image">
          <img [src]=" product.imageUrl" [alt]="product.name" />
        </div>

        <!-- Informacije o proizvodu -->
        <div class="product-info">
  <h3>{{ product.name }}</h3>
  <p class="brand"><strong>Brand:</strong> {{ product.brend }}</p>
  <p class="description">{{ product.description }}</p>
  <p class="price">{{ product.price }} KM</p>

  <div class="stock">
    <span class="stock-badge" [ngClass]="{'out-of-stock': product.stockQuantity === 0}">
      {{ product.stockQuantity > 0 ? product.stockQuantity + ' na stanju' : 'Nema na stanju' }}
    </span>
  </div>
</div>

<div class="product-actions" *ngIf="!isAdmin">
 <button
  mat-raised-button
  color="primary"
  [disabled]="product.stockQuantity === 0"
  (click)="addToCart(product.id)">
  Add to cart
</button>

</div>


        <!-- Dugme za dodavanje u korpu (ako nije admin) -->


      </div>
    </div>
  </section>

</div>
